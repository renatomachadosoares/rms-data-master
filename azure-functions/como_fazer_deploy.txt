passo 1: login

az login --tenant <TENANT-ID>


passo 2: criar grupo de recursos

az group create --name AzureFunctionsQuickstart-rg --location "Brazil South"


passo 3: criar storage account

az storage account create --name dmstarms20241224 --location "Brazil South" --resource-group AzureFunctionsQuickstart-rg --sku Standard_LRS


passo 4: criar azure function app

az functionapp create --resource-group AzureFunctionsQuickstart-rg --consumption-plan-location brazilsouth --runtime python --runtime-version 3.11 --functions-version 4 --name azfappdmrms20241224 --os-type linux --storage-account dmstarms20241224


passo 5: publicar a aplicação (deve-se estar no diretório raiz da aplicação)

func azure functionapp publish azfappdmrms20241224

* Ao alterar a função (arquivo python) basta executar o comando de publicar novamente para atualizar a aplicação na nuvem.


passo 6: testando

A aplicação (caso seja HTTP) é acessada através do link estruturado abaixo:

https://<NOME_APLICACAO>.azurewebsites.net/api/<NOME_ROTA>

Onde NOME_ROTA é o nome da rota definida na anotação da função python com o parâmetro 'route' com todas as letras em minusculo.


---------------------------------------------------------------------------------------------
Referências:

Criando uma função azure python usando linha de comando 

https://learn.microsoft.com/en-us/azure/azure-functions/create-first-function-cli-python?tabs=linux%2Cbash%2Cazure-cli%2Cbrowser 

Para executar esse tutorial de forma correta é preciso realizar os seguintes passos em caso de erros: 

1. Ter o .net instalado na máquina de desenvolvimento: https://dotnet.microsoft.com/en-us/download 

2. Ao executar o passo onde é executada função localmente é disparado um erro do tipo 'Exception: AttributeError: Anonymous', ver o seguinte fórum para solução: https://stackoverflow.com/questions/78668008/exception-attributeerror-anonymous-when-starting-a-basic-function-app 